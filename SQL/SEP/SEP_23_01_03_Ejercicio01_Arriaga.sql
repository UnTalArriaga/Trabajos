set dateformat dmy;
CREATE TABLE CAMION(
PLACA VARCHAR(7),
CIUDADRESGUARDO VARCHAR(30),
CARGAMAX INT,
CONSTRAINT PK_CAMION PRIMARY KEY(PLACA)
);

CREATE TABLE CONDUCTOR(
RFC VARCHAR(13),
NOMBRE VARCHAR(50),
DIRECCION VARCHAR(50),
CONSTRAINT PK_CONDUCTOR PRIMARY KEY (RFC)
);

CREATE TABLE RUTAS(
RUTA INT,
NOMBRE VARCHAR(50),
CONSTRAINT PK_RUTAS PRIMARY KEY(RUTA)
);

CREATE TABLE CONDUCE(
PLACA VARCHAR(7),
RFC VARCHAR(13),
FECHA DATE,
CONSTRAINT FK_CONDUCE_CAMION FOREIGN KEY(PLACA) REFERENCES CAMION(PLACA) ON DELETE CASCADE,
CONSTRAINT FK_CONDUCE_CONDUCTOR FOREIGN KEY(RFC) REFERENCES CONDUCTOR(RFC) ON DELETE CASCADE,
CONSTRAINT PK_CONDUCE PRIMARY KEY (PLACA, RFC)
);

CREATE TABLE CONDUCTOR_RUTAS(
RUTA INT,
RFC VARCHAR(13),
CONSTRAINT FK_CONDUCTOR_RUTAS_RUTAS FOREIGN KEY(RUTA) REFERENCES RUTAS(RUTA) ON DELETE CASCADE,
CONSTRAINT FK_CONDUCTOR_RUTAS_CONDUCTOR FOREIGN KEY(RFC) REFERENCES CONDUCTOR(RFC) ON DELETE CASCADE,
CONSTRAINT PK_CONDUCTOR_RUTAS PRIMARY KEY (RUTA, RFC)
);

CREATE TABLE C_LOCAL(
NOMBRE VARCHAR(50),
CODIGO INT,
CONSTRAINT PK_C_LOCAL PRIMARY KEY (CODIGO)
);

CREATE TABLE PAQUETE(
CODIGO INT,
DIRECCION VARCHAR (50) NOT NULL,
PESO NUMERIC(6,3),
DESTINATARIO VARCHAR(30) NOT NULL,
TIPO CHAR,
CONSTRAINT CK_TIPO CHECK (TIPO IN('N','I')),
CONSTRAINT PK_PAQUETE PRIMARY KEY(CODIGO,TIPO)
);

CREATE TABLE NACIONAL(
CODIGO INT,
CIUDADDESTINO VARCHAR(50),
RFC VARCHAR(13),
TIPO CHAR,
CONSTRAINT FK_NACIONAL_PAQUETE FOREIGN KEY(CODIGO, TIPO) REFERENCES PAQUETE(CODIGO, TIPO) ON DELETE CASCADE,
CONSTRAINT CK_TIPONACIONAL CHECK (TIPO='N'),
CONSTRAINT FK_NACIONAL_CONDUCTOR FOREIGN KEY(RFC) REFERENCES CONDUCTOR(RFC) ON DELETE CASCADE,
CONSTRAINT PK_NACIONAL PRIMARY KEY (CODIGO)
);

CREATE TABLE INTERNACIONAL(
CODIGO INT,
LINEAAEREA VARCHAR(50),
F_ENTREGA DATE,
C_LOCALCODIGO INT,
TIPO CHAR,
CONSTRAINT FK_INTERNACIONAL_PAQUETE FOREIGN KEY(CODIGO, TIPO) REFERENCES PAQUETE(CODIGO, TIPO) ON DELETE CASCADE,
CONSTRAINT CK_TIPOINTERNACIONAL CHECK (TIPO='I'),
CONSTRAINT FK_INTERNACIONAL_C_LOCAL FOREIGN KEY(C_LOCALCODIGO) REFERENCES C_LOCAL(CODIGO) ON DELETE CASCADE,
CONSTRAINT PK_INTERNACIONAL PRIMARY KEY (CODIGO)
);

CREATE TABLE RUTAS_NACIONAL(
RUTA INT,
CODIGO INT,
CONSTRAINT FK_RUTAS_NACIONAL_RUTAS FOREIGN KEY(RUTA) REFERENCES RUTAS(RUTA) ON DELETE CASCADE,
CONSTRAINT FK_RUTAS_NACIONAL_NACIONAL FOREIGN KEY(CODIGO) REFERENCES NACIONAL(CODIGO) ON DELETE CASCADE,
CONSTRAINT PK_RUTAS_NACIONAL PRIMARY KEY (RUTA, CODIGO)
);

INSERT INTO RUTAS VALUES(1,'CDMX');
INSERT INTO RUTAS VALUES(2,'NUEVO LEON');
INSERT INTO RUTAS VALUES(3,'SONORA');
INSERT INTO RUTAS VALUES(4,'BAJA');
INSERT INTO RUTAS VALUES(5,'BAJASUR');
INSERT INTO RUTAS VALUES(6,'OAXACA');
INSERT INTO RUTAS VALUES(7,'JALLISCO');
INSERT INTO RUTAS VALUES(8,'YUCATAN');
INSERT INTO RUTAS VALUES(9,'QUINTANA ROO');
INSERT INTO RUTAS VALUES(10,'VERACRUZ');

INSERT INTO CAMION VALUES('ASAP123', 'GUADALAJARA', 550);
INSERT INTO CAMION VALUES('SAWS666', 'MONTERREY', 550);
INSERT INTO CAMION VALUES('EPIC000', 'HERMOSILLO', 550);
INSERT INTO CAMION VALUES('R2D2XD1', 'XALAPA', 550);

INSERT INTO CONDUCTOR VALUES ('SADP990101ASD', 'PEDRO SANCHEZ DOMINGUEZ', 'NEZAHUALCOYOTL');
INSERT INTO CONDUCTOR VALUES ('PEDJ990202ASX', 'JUAN PEREZ DAVILA', 'SONORA');
INSERT INTO CONDUCTOR VALUES ('GOFJ990303SSD', 'JUANA GOMEZ FITZ', 'MONTERREY');
INSERT INTO CONDUCTOR VALUES ('AALV990404BSD', 'VICTOR ALVAREZ LOPEZ', 'LA PAZ');

INSERT INTO CONDUCE VALUES('ASAP123', 'SADP990101ASD', '04/09/19');
INSERT INTO CONDUCE VALUES('SAWS666', 'PEDJ990202ASX', '18/09/20');
INSERT INTO CONDUCE VALUES('EPIC000', 'GOFJ990303SSD', '01/01/16');
INSERT INTO CONDUCE VALUES('R2D2XD1', 'AALV990404BSD', '03/02/22');

INSERT INTO CONDUCTOR_RUTAS VALUES(1, 'SADP990101ASD');
INSERT INTO CONDUCTOR_RUTAS VALUES(4, 'PEDJ990202ASX');
INSERT INTO CONDUCTOR_RUTAS VALUES(5, 'PEDJ990202ASX');
INSERT INTO CONDUCTOR_RUTAS VALUES(3, 'AALV990404BSD');

INSERT INTO C_LOCAL VALUES('ASDAS',1);
INSERT INTO C_LOCAL VALUES('DASDSAC',3);
INSERT INTO C_LOCAL VALUES('MMKN',2);
INSERT INTO C_LOCAL VALUES('OUINUI',4);

INSERT INTO PAQUETE VALUES(1,'NOGALES', 0.450,'ALFREDO','N');
INSERT INTO PAQUETE VALUES(2,'BUENAVISTA', 0.125,'ARTURO','N');
INSERT INTO PAQUETE VALUES(3,'LA PAZ', 1.5,'DANIELA','N');
INSERT INTO PAQUETE VALUES(4,'CABO SAN LUCAS', 0.4,'TERESA','N');

INSERT INTO PAQUETE VALUES(5,'PAISES BAJOS', 0.5,'ETIEN','I');
INSERT INTO PAQUETE VALUES(6,'ALEMANIA', 0.5,'EMILIA','I');
INSERT INTO PAQUETE VALUES(7,'FRANCIA', 0.5,'ALEXANDRA','I');
INSERT INTO PAQUETE VALUES(8,'ESPAÑA', 0.5,'RUBEN','I');

INSERT INTO INTERNACIONAL VALUES(5,'DHL', '29/11/22', 1, 'I');
INSERT INTO INTERNACIONAL VALUES(6,'DHL', '18/01/23', 3, 'I');
INSERT INTO INTERNACIONAL VALUES(7,'DHL', '12/11/22', 1, 'I');
INSERT INTO INTERNACIONAL VALUES(8,'DHL', '23/12/22', 4, 'I');

INSERT INTO NACIONAL VALUES(1,'NOGALES', 'AALV990404BSD', 'N');
INSERT INTO NACIONAL VALUES(2,'BUENAVISTA', 'SADP990101ASD', 'N');
INSERT INTO NACIONAL VALUES(3,'LA PAZ', 'PEDJ990202ASX', 'N');
INSERT INTO NACIONAL VALUES(4,'CABO SAN LUCAS', 'PEDJ990202ASX', 'N');

INSERT INTO RUTAS_NACIONAL VALUES(1, 2);
INSERT INTO RUTAS_NACIONAL VALUES(4, 4);
INSERT INTO RUTAS_NACIONAL VALUES(5, 3);
INSERT INTO RUTAS_NACIONAL VALUES(3, 1);

DROP TABLE RUTAS_NACIONAL;
DROP TABLE NACIONAL;
DROP TABLE INTERNACIONAL;
DROP TABLE C_LOCAL;
DROP TABLE PAQUETE;
DROP TABLE CONDUCTOR_RUTAS;
DROP TABLE CONDUCE;
DROP TABLE RUTAS;
DROP TABLE CONDUCTOR;
DROP TABLE CAMION;

